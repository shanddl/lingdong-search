# çµåŠ¨æœç´¢ (Ling Dong Search)

<div align="center">

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€é«˜åº¦å¯å®šåˆ¶çš„Chromeæµè§ˆå™¨æ–°æ ‡ç­¾é¡µæ‰©å±•

[![ä¸‹è½½æœ€æ–°ç‰ˆ](https://img.shields.io/badge/ä¸‹è½½-CRXæ–‡ä»¶-blue?style=for-the-badge&logo=google-chrome)](https://github.com/shanddl/lingdong-search/releases/download/v1.0.0/lingdong-search-v1.0.crx)
[![Releases](https://img.shields.io/badge/æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬-Release-green?style=for-the-badge&logo=github)](https://github.com/shanddl/lingdong-search/releases)

**ğŸ”— ç›´æ¥ä¸‹è½½é“¾æ¥ï¼š**
```
https://github.com/shanddl/lingdong-search/releases/download/v1.0.0/lingdong-search-v1.0.crx
```

[![Manifest V3](https://img.shields.io/badge/Manifest-V3-brightgreen)](https://developer.chrome.com/docs/extensions/mv3/)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)

[åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) â€¢ [å®‰è£…ä½¿ç”¨](#-å®‰è£…ä½¿ç”¨) â€¢ [é¡¹ç›®æ¶æ„](#-é¡¹ç›®æ¶æ„) â€¢ [å¼€å‘æŒ‡å—](#-å¼€å‘æŒ‡å—)

</div>

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ” æ™ºèƒ½æœç´¢
- **å¤šå¼•æ“åˆ‡æ¢** - æ”¯æŒå¤šä¸ªæœç´¢å¼•æ“ï¼ˆGoogleã€Bingã€ç™¾åº¦ç­‰ï¼‰ï¼Œå¯è‡ªå®šä¹‰æ·»åŠ 
- **æœç´¢èŒƒå›´é™å®š** - ç²¾ç¡®æ§åˆ¶æœç´¢èŒƒå›´ï¼Œæ”¯æŒç«™ç‚¹é™å®šã€æ–‡ä»¶ç±»å‹ã€æ—¶é—´èŒƒå›´ç­‰
- **æœç´¢å»ºè®®** - å®æ—¶æœç´¢å»ºè®®ã€å†å²è®°å½•ã€ä¹¦ç­¾æœç´¢
- **AIæœç´¢é›†æˆ** - å¿«é€Ÿè®¿é—®AIæœç´¢å·¥å…·ï¼ˆKimiã€ç§˜å¡”ç­‰ï¼‰

### ğŸ“Œ å¯¼èˆªç®¡ç†
- **å¿«é€Ÿå¯¼èˆª** - è‡ªå®šä¹‰å¯¼èˆªå›¾æ ‡ï¼Œæ”¯æŒåˆ†ç»„ç®¡ç†
- **æ‹–æ‹½æ’åº** - ç›´è§‚çš„æ‹–æ‹½æ“ä½œï¼Œè‡ªç”±è°ƒæ•´é¡ºåº
- **å³é”®èœå•** - å¿«æ·ç¼–è¾‘ã€åˆ é™¤ã€æ–°æ ‡ç­¾é¡µæ‰“å¼€
- **Popupå¿«æ·æ·»åŠ ** - æµè§ˆä»»ä½•ç½‘ç«™æ—¶ä¸€é”®æ·»åŠ åˆ°å¯¼èˆª

### ğŸ¨ å¤–è§‚å®šåˆ¶
- **ä½ç½®è°ƒæ•´** - æœç´¢æ¡†ä½ç½®ã€å¤§å°å®Œå…¨å¯å®šåˆ¶
- **æ ·å¼é€‰æ‹©** - å¤šç§å¯¼èˆªå›¾æ ‡å½¢çŠ¶ï¼ˆæ–¹å½¢ã€èƒ¶å›Šå½¢ï¼‰
- **å¯¹é½æ–¹å¼** - å¯¼èˆªé¡¹å·¦å¯¹é½ã€å±…ä¸­ã€å³å¯¹é½
- **å°ºå¯¸æ§åˆ¶** - å›¾æ ‡å¤§å°ã€é—´è·ã€å¯†åº¦ç‹¬ç«‹è°ƒæ•´

### ğŸ” å®‰å…¨ä¸æ€§èƒ½
- **XSSé˜²æŠ¤** - å®Œæ•´çš„è¾“å…¥éªŒè¯å’ŒHTMLè½¬ä¹‰
- **CSPç­–ç•¥** - ä¸¥æ ¼çš„å†…å®¹å®‰å…¨ç­–ç•¥
- **åŒé‡å­˜å‚¨** - chrome.storage + localStorage åŒé‡å¤‡ä»½
- **é˜²æŠ–èŠ‚æµ** - ä¼˜åŒ–æœç´¢å’ŒUIäº¤äº’æ€§èƒ½
- **é”™è¯¯æ•è·** - å…¨å±€é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

---

## ğŸš€ å®‰è£…ä½¿ç”¨

### æ–¹å¼ä¸€ï¼šä» GitHub Releases å®‰è£…ï¼ˆæ¨èï¼‰

1. **ä¸‹è½½ CRX æ–‡ä»¶**
   - ç‚¹å‡»ä¸Šæ–¹ **"ä¸‹è½½æœ€æ–°ç‰ˆ"** æŒ‰é’®ç›´æ¥ä¸‹è½½
   - **ç›´æ¥ä¸‹è½½é“¾æ¥**ï¼š`https://github.com/shanddl/lingdong-search/releases/download/v1.0.0/lingdong-search-v1.0.crx`
   - æˆ–è®¿é—® [Releases](https://github.com/shanddl/lingdong-search/releases) é¡µé¢æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬

2. **å®‰è£…æ‰©å±•**
   - æ‰“å¼€ Chrome æµè§ˆå™¨
   - è®¿é—® `chrome://extensions/`
   - å¯ç”¨"å¼€å‘è€…æ¨¡å¼"ï¼ˆå³ä¸Šè§’ï¼‰
   - å°†ä¸‹è½½çš„ `.crx` æ–‡ä»¶æ‹–æ‹½åˆ°é¡µé¢ä¸­å®Œæˆå®‰è£…

3. **å¼€å§‹ä½¿ç”¨**
   - æ‰“å¼€æ–°æ ‡ç­¾é¡µï¼Œå³å¯çœ‹åˆ°çµåŠ¨æœç´¢ç•Œé¢
   - ç‚¹å‡»æ‰©å±•å›¾æ ‡å¯å¿«é€Ÿæ·»åŠ å½“å‰ç½‘ç«™åˆ°å¯¼èˆª

### æ–¹å¼äºŒï¼šå¼€å‘æ¨¡å¼å®‰è£…

1. **å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd æ–°æ ‡ç­¾æœ¬åœ°ç‰ˆ
   ```

2. **åŠ è½½æ‰©å±•**
   - æ‰“å¼€ Chrome æµè§ˆå™¨
   - è®¿é—® `chrome://extensions/`
   - å¯ç”¨"å¼€å‘è€…æ¨¡å¼"ï¼ˆå³ä¸Šè§’ï¼‰
   - ç‚¹å‡»"åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"
   - é€‰æ‹©é¡¹ç›®æ–‡ä»¶å¤¹

### è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²

é¡¹ç›®å·²é…ç½® GitHub Actionsï¼Œæ”¯æŒè‡ªåŠ¨æ‰“åŒ… CRX æ–‡ä»¶ï¼š

- **è§¦å‘æ–¹å¼**ï¼š
  - æ¨é€ä»£ç åˆ° `main` æˆ– `master` åˆ†æ”¯ï¼ˆä»…æ„å»ºï¼‰
  - åˆ›å»ºç‰ˆæœ¬ Tagï¼ˆè‡ªåŠ¨åˆ›å»º Release å¹¶æä¾›ä¸‹è½½é“¾æ¥ï¼‰
  - æ‰‹åŠ¨è§¦å‘å·¥ä½œæµ

- **æ„å»ºäº§ç‰©**ï¼š
  - CRX æ–‡ä»¶è‡ªåŠ¨ä¸Šä¼ åˆ° GitHub Releases
  - æä¾›ç›´æ¥ä¸‹è½½é“¾æ¥

è¯¦ç»†éƒ¨ç½²è¯´æ˜è¯·æŸ¥çœ‹ [README-DEPLOY.md](README-DEPLOY.md)

### ç”Ÿäº§ç¯å¢ƒé…ç½®

åœ¨å‘å¸ƒå‰ï¼Œå»ºè®®ä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š

```javascript
// js/config.js
const CURRENT_ENV = 'production';  // ä» 'development' æ”¹ä¸º 'production'
```

è¿™å°†ï¼š
- ç¦ç”¨è°ƒè¯•æ—¥å¿—è¾“å‡º
- å…³é—­æ€§èƒ½ç›‘æ§
- ä¼˜åŒ–é”™è¯¯æç¤º

---

## ğŸ“ é¡¹ç›®æ¶æ„

### ç›®å½•ç»“æ„

```
åŠæˆå“/
â”œâ”€â”€ manifest.json           # æ‰©å±•é…ç½®æ–‡ä»¶ (Manifest V3)
â”œâ”€â”€ index.html              # æ–°æ ‡ç­¾é¡µä¸»é¡µé¢
â”œâ”€â”€ popup.html              # æ‰©å±•å¼¹å‡ºçª—å£
â”œâ”€â”€ css/                    # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ style.css           # ä¸»æ ·å¼
â”‚   â””â”€â”€ popup.css           # å¼¹å‡ºçª—å£æ ·å¼
â”œâ”€â”€ js/                     # JavaScriptæ¨¡å—
â”‚   â”œâ”€â”€ main.js             # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ config.js           # ç¯å¢ƒé…ç½®
â”‚   â”œâ”€â”€ constants.js        # å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ core.js             # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”œâ”€â”€ state.js            # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ dom.js              # DOMç¼“å­˜
â”‚   â”œâ”€â”€ storage.js          # å­˜å‚¨ç®¡ç†
â”‚   â”œâ”€â”€ security.js         # å®‰å…¨å·¥å…·
â”‚   â”œâ”€â”€ logger.js           # æ—¥å¿—ç³»ç»Ÿ
â”‚   â”œâ”€â”€ errorHandler.js     # é”™è¯¯å¤„ç†
â”‚   â”œâ”€â”€ initializer.js      # åˆå§‹åŒ–æ¨¡å—
â”‚   â”œâ”€â”€ eventManager.js     # äº‹ä»¶ç®¡ç†
â”‚   â”œâ”€â”€ utils.js            # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ handlers.js         # äº‹ä»¶å¤„ç†å™¨
â”‚   â”œâ”€â”€ features/           # åŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ search.js       # æœç´¢åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ navigation.js   # å¯¼èˆªç®¡ç†
â”‚   â”‚   â”œâ”€â”€ ai-settings.js  # AIè®¾ç½®
â”‚   â”‚   â”œâ”€â”€ bookmarkSearch.js  # ä¹¦ç­¾æœç´¢
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ ui/                 # UIæ¨¡å—
â”‚       â”œâ”€â”€ render.js       # æ¸²æŸ“å‡½æ•°
â”‚       â””â”€â”€ modalManager.js # æ¨¡æ€æ¡†ç®¡ç†
â”œâ”€â”€ icons/                  # æ‰©å±•å›¾æ ‡
â””â”€â”€ popup.js                # å¼¹å‡ºçª—å£è„šæœ¬
```

### æ¨¡å—è¯´æ˜

#### æ ¸å¿ƒæ¨¡å—
- **main.js** - åº”ç”¨å…¥å£ï¼Œåè°ƒå„æ¨¡å—åˆå§‹åŒ–
- **core.js** - æ•°æ®åŠ è½½/ä¿å­˜ã€è®¾ç½®åº”ç”¨ã€æœç´¢æ‰§è¡Œ
- **state.js** - å…¨å±€çŠ¶æ€ç®¡ç†
- **config.js** - ç¯å¢ƒé…ç½®ï¼ˆå¼€å‘/ç”Ÿäº§ï¼‰

#### åŠŸèƒ½æ¨¡å—
- **search.js** - æœç´¢å»ºè®®ã€å†å²è®°å½•ã€AIæœç´¢
- **navigation.js** - å¯¼èˆªé¡¹ç®¡ç†ã€æ‹–æ‹½æ’åºã€å³é”®èœå•
- **ai-settings.js** - AIç½‘ç«™ç®¡ç†å’Œé…ç½®

#### å·¥å…·æ¨¡å—
- **security.js** - XSSé˜²æŠ¤ã€URLéªŒè¯ã€è¾“å…¥æ¸…ç†
- **logger.js** - åˆ†çº§æ—¥å¿—ç³»ç»Ÿ
- **errorHandler.js** - å…¨å±€é”™è¯¯æ•è·å’Œå¤„ç†
- **eventManager.js** - äº‹ä»¶ç›‘å¬å™¨ç»Ÿä¸€ç®¡ç†

---

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æŠ€æœ¯æ ˆ

- **åŸç”ŸJavaScript** (ES6+) - æ— å¤–éƒ¨ä¾èµ–
- **CSS3** - ç°ä»£æ ·å¼ç‰¹æ€§
- **Chrome Extension API** - Manifest V3

### å¼€å‘ç¯å¢ƒé…ç½®

1. **å¯ç”¨å¼€å‘æ¨¡å¼**
   ```javascript
   // js/config.js
   const CURRENT_ENV = 'development';
   ```

2. **æŸ¥çœ‹æ—¥å¿—**
   - æ‰“å¼€å¼€å‘è€…å·¥å…· (F12)
   - æ—¥å¿—ä¼šæ˜¾ç¤ºåœ¨Consoleæ ‡ç­¾
   - åŒ…å«æ¨¡å—åç§°å’Œæ—¶é—´æˆ³

3. **å®æ—¶è°ƒè¯•**
   - ä¿®æ”¹ä»£ç ååˆ·æ–°æ‰©å±•æˆ–æ–°æ ‡ç­¾é¡µå³å¯çœ‹åˆ°æ•ˆæœ
   - ä½¿ç”¨ `logger.debug()` è¾“å‡ºè°ƒè¯•ä¿¡æ¯

### ä»£ç è§„èŒƒ

#### å‘½åçº¦å®š
- **å˜é‡/å‡½æ•°** - é©¼å³°å‘½åæ³• (camelCase)
- **å¸¸é‡** - å¤§å†™ä¸‹åˆ’çº¿ (UPPER_SNAKE_CASE)
- **DOMå…ƒç´ ** - å¸¦domå‰ç¼€ (dom.searchInput)
- **æ¨¡å—** - å•æ•°å½¢å¼ (navigationModule, searchModule)

#### æ¨¡å—å¯¼å‡º
```javascript
// å¯¼å‡ºå¯¹è±¡
export const moduleName = {
    method1: () => {},
    method2: () => {}
};

// å¯¼å‡ºå‡½æ•°
export function helperFunction() {}
```

#### æ³¨é‡Šè§„èŒƒ
```javascript
/**
 * å‡½æ•°è¯´æ˜
 * @param {string} param1 - å‚æ•°è¯´æ˜
 * @returns {boolean} è¿”å›å€¼è¯´æ˜
 */
function exampleFunction(param1) {
    // å®ç°ç»†èŠ‚æ³¨é‡Š
    return true;
}
```

### æ·»åŠ æ–°åŠŸèƒ½

#### 1. åˆ›å»ºåŠŸèƒ½æ¨¡å—
```javascript
// js/features/myFeature.js
import { logger } from '../logger.js';

const log = logger.module('MyFeature');

export const myFeature = {
    init: () => {
        log.info('MyFeature initialized');
    },
    
    doSomething: () => {
        // å®ç°åŠŸèƒ½
    }
};
```

#### 2. åœ¨main.jsä¸­å¼•å…¥
```javascript
import { myFeature } from './features/myFeature.js';

function init() {
    // ...
    myFeature.init();
    // ...
}
```

#### 3. æ·»åŠ åˆ°constants.jsï¼ˆå¦‚éœ€è¦ï¼‰
```javascript
export const STATIC_CONFIG = {
    // ...
    MY_FEATURE_CONFIG: {
        option1: 'value1',
        option2: 'value2'
    }
};
```

### è°ƒè¯•æŠ€å·§

#### ä½¿ç”¨loggeræ¨¡å—
```javascript
import { logger } from './logger.js';

// åˆ›å»ºæ¨¡å—ä¸“ç”¨logger
const log = logger.module('ModuleName');

// ä¸åŒçº§åˆ«çš„æ—¥å¿—
log.debug('è°ƒè¯•ä¿¡æ¯', data);
log.info('æ™®é€šä¿¡æ¯', data);
log.warn('è­¦å‘Šä¿¡æ¯', data);
log.error('é”™è¯¯ä¿¡æ¯', error);

// æ€§èƒ½ç›‘æ§
logger.performance.start('operation');
// æ‰§è¡Œæ“ä½œ...
logger.performance.end('operation');
```

#### æŸ¥çœ‹é”™è¯¯æ—¥å¿—
```javascript
// åœ¨æ§åˆ¶å°æ‰§è¡Œ
errorHandler.getErrorLog();    // è·å–é”™è¯¯æ—¥å¿—
errorHandler.exportErrorLog(); // å¯¼å‡ºJSONæ ¼å¼æ—¥å¿—
```

---

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒé…ç½® (config.js)

```javascript
export const config = {
    env: 'development',  // 'development' æˆ– 'production'
    
    debug: {
        enableConsole: true,     // æ˜¯å¦å¯ç”¨æ§åˆ¶å°æ—¥å¿—
        logLevel: 'debug',       // æ—¥å¿—çº§åˆ«: debug/info/warn/error
        enablePerformance: true, // æ˜¯å¦å¯ç”¨æ€§èƒ½ç›‘æ§
        verboseErrors: true      // æ˜¯å¦æ˜¾ç¤ºè¯¦ç»†é”™è¯¯å †æ ˆ
    },
    
    features: {
        bookmarkSearch: true,    // ä¹¦ç­¾æœç´¢åŠŸèƒ½
        aiSearch: true           // AIæœç´¢åŠŸèƒ½
    },
    
    performance: {
        debounceDelay: 300,      // é˜²æŠ–å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
        throttleDelay: 100,      // èŠ‚æµå»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
        minSearchChars: 1,       // è§¦å‘æœç´¢çš„æœ€å°å­—ç¬¦æ•°
        maxHistoryItems: 100     // æœ€å¤§å†å²è®°å½•æ•°
    }
};
```

### æ—¶é—´å¸¸é‡ (constants.js)

æ‰€æœ‰æ—¶é—´ç›¸å…³çš„é­”æ³•æ•°å­—å·²æå–åˆ° `STATIC_CONFIG.TIMING` å¯¹è±¡ï¼š

```javascript
TIMING: {
    DOUBLE_CLICK_THRESHOLD: 300,     // åŒå‡»æ£€æµ‹æ—¶é—´çª—å£
    SEARCH_DEBOUNCE_DELAY: 150,      // æœç´¢å»ºè®®é˜²æŠ–å»¶è¿Ÿ
    SEARCH_BLUR_DELAY: 300,          // æœç´¢æ¡†å¤±ç„¦å»¶è¿Ÿ
    PREVENT_HIDE_RESET_DELAY: 1000,  // é˜»æ­¢éšè—æ ‡å¿—é‡ç½®æ—¶é—´
    TOAST_DURATION: 2000,            // Toastæç¤ºæ˜¾ç¤ºæ—¶é—´
    // ...æ›´å¤š
}
```

---

## ğŸ”’ å®‰å…¨ç‰¹æ€§

### XSSé˜²æŠ¤
- æ‰€æœ‰ç”¨æˆ·è¾“å…¥ç»è¿‡ `sanitizer.escapeHtml()` è½¬ä¹‰
- URLç»è¿‡ `sanitizer.sanitizeUrl()` éªŒè¯
- ä½¿ç”¨ `textContent` è€Œé `innerHTML`

### CSPç­–ç•¥
```javascript
"content_security_policy": {
    "extension_pages": "default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self' https:;"
}
```

### è¾“å…¥éªŒè¯
- `validator.validateEngineUrl()` - éªŒè¯æœç´¢å¼•æ“URL
- `validator.validateSiteUrl()` - éªŒè¯ç½‘ç«™URL
- `validator.cleanName()` - æ¸…ç†å’ŒéªŒè¯åç§°

---

## ğŸ“ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## ğŸ™ è‡´è°¢

- å›¾æ ‡æœåŠ¡: [icon.bqb.cool](https://icon.bqb.cool)
- æœç´¢å¼•æ“API: Google, Bing, ç™¾åº¦ç­‰

---

## ğŸ“® è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- æäº¤ Issue
- å‘èµ· Pull Request

---

<div align="center">

**çµåŠ¨æœç´¢** - è®©æ¯ä¸ªæ–°æ ‡ç­¾é¡µéƒ½ä¸ä¼—ä¸åŒ

Made with â¤ï¸ using native JavaScript

</div>

